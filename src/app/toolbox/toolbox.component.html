<form [formGroup]="dynamicForm" (ngSubmit)="onSubmit()">
  <div formArrayName="inputGroups" class="flex flex-col">
    <div *ngFor="let group of inputGroups.controls; let i = index" [formGroupName]="i" class="flex flex-row input-group">

     <!-- TODO: create a custom dropdown component and use that -->
      <div class="basis-1/4 form-group">
        <label for="column" class="block text-sm font-medium leading-6 text-gray-900">Column</label>
        <select id="column" formControlName="column" autocomplete="column" class="form-control block w-full px-0.5 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6">
          <option *ngFor="let col of columns" [value]="col">{{col}}</option>
        </select> 
        <div *ngIf="group.get('column').hasError('required') && group.get('column').touched" class="alert alert-danger">
          column is required.
        </div>
      </div>

     
      <div class="basis-1/4 form-group">
        <label for="operator" class="block text-sm font-medium leading-6 text-gray-900">Operator:</label>
        <select id="operator" formControlName="operator" class="form-control block w-full rounded-md border-0 px-0.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6">
          <option *ngFor="let op of operators" [value]="op">{{op}}</option>
        </select>
        <div *ngIf="group.get('operator').hasError('required') && group.get('operator').touched" class="alert alert-danger">
          Operator is required.
        </div>
      </div>

      <div class="basis-1/4 form-group">
        <label for="inputValue" class="block text-sm font-medium leading-6 text-gray-900">Input Box:</label>
        <input type="text" id="inputValue" formControlName="inputValue" class="form-control block w-full rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6">
        <div *ngIf="group.get('inputValue').hasError('required') && group.get('inputValue').touched" class="alert alert-danger">
          Input Box is required.
        </div>
      </div>

      <button type="button" (click)="removeInputGroup(i)">
        <div class="flex items-center w-10 h-10 px-2 rounded-full shadow-lg">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M18 12H6" />
          </svg>
        </div>
       
      </button>
    </div>
  </div>

  
  <button type="button" (click)="addInputGroup()">
    <div class="flex items-center w-10 h-10 px-2 rounded-full shadow-lg">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m6-6H6" />
      </svg>
    </div>
  </button>
  <br>
  <br>
  <button type="submit" [disabled]="inputGroups.controls.length < 1">Apply</button>
</form> 
